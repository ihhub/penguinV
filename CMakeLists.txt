cmake_minimum_required(VERSION 3.8)
project(penguinV)
include(CTest)

option(PENGUINV_BUILD_TEST "Build tests of penguinV" ON)
if(${PENGUINV_BUILD_TEST} OR (CMAKE_CURRENT_SOURCE_DIR STREQUAL CMAKE_SOURCE_DIR))
    enable_testing()
    add_subdirectory(test)
endif()

option(PENGUINV_BUILD_EXAMPLE "Build examples of penguinV" ON)
if(${PENGUINV_BUILD_EXAMPLE} OR (CMAKE_CURRENT_SOURCE_DIR STREQUAL CMAKE_SOURCE_DIR))
    add_subdirectory(examples)
endif()

option(PENGUINV_ENABLE_PNG_SUPPORT "Enable support of libpng" ON)
if(${PENGUINV_ENABLE_PNG_SUPPORT})
    option(PENGUINV_USE_EXTERNAL_PNG "Download libpng and build from source" OFF)
    if(${PENGUINV_USE_EXTERNAL_PNG})
        message(STATUS "Using external libpng")
        include(external_zlib)
        include(external_png)
    else()
        message(STATUS "Using system libpng")
        find_package(PNG REQUIRED)
    endif()
endif()